<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>WebXStudio: –ó–∞–¥–∞–Ω–∏—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/lottie-web@5.12.2/build/player/lottie.min.js"></script>
    <style>
        /* ================================================= */
        /* –°–¢–ò–õ–ò */
        /* ================================================= */
        :root {
            --tg-text-color: #000000;
            --tg-bg-color: #FFFFFF;
            --tg-secondary-bg-color: #F8F8F8;
            --tg-hint-color: #9C9C9C;
            --tg-link-color: #007AFF;
            --tg-button-color: #007AFF; 
            --tg-button-text-color: #FFFFFF;
            --task-price-color: #4CAF50; 
            --mir-logo-color: #FF7B00;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0 0 70px 0;
            background-color: var(--tg-theme-bg-color, var(--tg-bg-color));
            color: var(--tg-theme-text-color, var(--tg-text-color));
            overflow-x: hidden;
            -webkit-user-select: none;
            user-select: none;
            min-height: 100vh;
        }
        
        .header {
            display: flex;
            align-items: center;
            padding: 15px;
            font-size: 17px;
            font-weight: 600;
            line-height: 22px;
        }
        .back-arrow {
            font-size: 24px;
            margin-right: 15px;
            cursor: pointer;
            font-weight: 400;
        }
        .content-wrap {
            padding: 0 15px;
        }

        .task-filters {
            display: flex;
            overflow-x: scroll;
            padding: 0 15px 15px 15px;
            margin: 0 -15px;
            gap: 8px;
            -webkit-overflow-scrolling: touch;
        }
        .task-filters::-webkit-scrollbar { display: none; }

        .filter-button {
            flex-shrink: 0;
            padding: 7px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        .filter-button.active {
            background-color: var(--tg-theme-button-color, var(--tg-button-color));
            color: var(--tg-theme-button-text-color, var(--tg-button-text-color));
        }
        .filter-button:not(.active) {
            background-color: var(--tg-theme-secondary-bg-color, #EFEFEF);
            color: var(--tg-theme-text-color, var(--tg-text-color));
        }

        .task-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--tg-theme-secondary-bg-color, #EFEFEF);
        }
        .task-left {
            display: flex;
            align-items: center;
        }
        .task-icon {
            width: 40px; height: 40px; border-radius: 8px;
            display: flex; justify-content: center; align-items: center;
            background-color: var(--tg-theme-secondary-bg-color);
            margin-right: 12px; font-size: 20px;
        }
        .task-info-main { flex-grow: 1; }
        .task-title { font-weight: 500; font-size: 16px; }
        .task-hint { font-size: 13px; color: var(--tg-theme-hint-color); }
        .task-action-btn {
            padding: 6px 12px;
            background-color: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            border-radius: 18px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            flex-shrink: 0;
            margin-left: 15px;
        }

        .task-detail-price {
            font-size: 40px;
            font-weight: 700;
            color: var(--task-price-color);
            margin: 10px 0;
        }
        .task-detail-images {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-direction: column; 
        }
        .upload-area {
            width: 100%;
            height: 80px;
            border: 2px dashed var(--tg-theme-hint-color);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16px;
            color: var(--tg-theme-hint-color);
            cursor: pointer;
            transition: all 0.2s;
            box-sizing: border-box;
            text-align: center;
        }
        .upload-area.uploaded {
            border: 2px solid var(--task-price-color);
            background-color: rgba(76, 175, 80, 0.1);
            color: var(--task-price-color);
        }
        .upload-icon { margin-right: 10px; font-size: 20px; }

        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none; justify-content: center; align-items: flex-end;
            z-index: 2000;
        }
        .modal-content {
            background-color: var(--tg-theme-bg-color);
            width: 100%; max-width: 400px; padding: 20px;
            border-top-left-radius: 15px; border-top-right-radius: 15px;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1);
        }
        .modal-option {
            padding: 15px 0; text-align: center; font-size: 17px;
            border-bottom: 1px solid var(--tg-theme-secondary-bg-color);
            cursor: pointer;
            color: var(--tg-theme-link-color);
        }
        .modal-option:last-child { border-bottom: none; }
        .modal-title { font-weight: 600; font-size: 18px; margin-bottom: 10px; text-align: center;}
        
        .wallet-balance-wrap { 
            text-align: center; 
            padding: 20px 0 10px 0; 
            line-height: 1.2;
            color: var(--tg-theme-hint-color);
        }
        .wallet-balance {
            font-size: 40px;
            font-weight: 700;
            margin: 10px 0;
            color: var(--tg-theme-text-color);
        }
        .wallet-actions {
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            border-bottom: 1px solid var(--tg-theme-secondary-bg-color);
        }
        .wallet-action-item {
            text-align: center;
            cursor: pointer;
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }
        .wallet-action-item .icon {
            font-size: 24px;
            margin-bottom: 5px;
            background-color: var(--tg-theme-secondary-bg-color);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 5px auto;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--tg-theme-secondary-bg-color);
        }
        .transaction-amount-text {
            font-weight: 600;
            color: var(--tg-theme-text-color); 
        }
        .transaction-card-info {
            font-size: 13px;
            color: var(--tg-theme-hint-color);
            text-align: right;
        }
        .mir-logo { color: var(--mir-logo-color); font-weight: bold; }

        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            display: flex; justify-content: space-around; align-items: center;
            height: 60px;
            background-color: var(--tg-theme-secondary-bg-color, #F8F8F8);
            border-top: 1px solid #D1D1D1; z-index: 1000;
        }
        .nav-item {
            flex: 1; text-align: center; color: var(--tg-theme-hint-color); padding: 5px 0;
        }
        .nav-item.active { color: var(--tg-theme-text-color); font-weight: 600; }
        .nav-icon { font-size: 24px; }
        
        /* ================================================= */
        /* –û–ù–ë–û–†–î–ò–ù–ì –°–¢–ò–õ–ò (–û–ë–ù–û–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤–∞—à–∏ —Ñ–æ—Ç–æ) */
        /* ================================================= */
        #onboarding-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--tg-theme-bg-color); 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeIn 0.6s;
        }
        .logo-circle {
            width: 240px;
            height: 240px;
            position: relative;
            margin-bottom: 50px;
        }
        
        .lottie-icon {
            /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π Lottie-–∞–Ω–∏–º–∞—Ü–∏–∏ */
            position: absolute;
            width: 76px;
            height: 76px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* –û–±—â–∏–π —Å—Ç–∏–ª—å –¥–ª—è –≤—Å–µ—Ö –ª–µ—Ç–∞—é—â–∏—Ö –∏–∫–æ–Ω–æ–∫ */
        .circle-item {
            position: absolute;
            width: 76px;
            height: 76px;
            border-radius: 18px;
            background: var(--tg-theme-bg-color);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            animation: float 7s infinite ease-in-out;
            
            /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
            background-size: 70%; 
            background-repeat: no-repeat;
            background-position: center;
        }
        
        /* –í–ù–ò–ú–ê–ù–ò–ï: nth-child(1) - —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π lottie-icon, –ø–æ—ç—Ç–æ–º—É –Ω–∞—á–∏–Ω–∞–µ–º —Å (2) */

        /* 1. –õ–û–î–ö–ê (Sailing) - –í–ê–®–ê –ò–ö–û–ù–ö–ê 1 */
        .circle-item:nth-child(2) { 
            top: 10px; left: 50px; animation-delay: 0s;
            /* === –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û–¢ URL –ù–ê –°–í–û–ô === */
            background-image: url('https://avatars.mds.yandex.net/i?id=65552bd6636ba7cef3b635ed6fcf995103df8ffc-2469813-images-thumbs&n=13'); 
        }
        
        /* 2. CHATGPT - –í–ê–®–ê –ò–ö–û–ù–ö–ê 2 */
        .circle-item:nth-child(3) { 
            top: 30px; right: 20px; animation-delay: 1s;
            /* === –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û–¢ URL –ù–ê –°–í–û–ô === */
            background-image: url('https://avatars.mds.yandex.net/i?id=1b626eed0c89889b68153bf578e0860964743e76-4219822-images-thumbs&n=13');
        }
        
        /* 3. –ö–ò–¢ (Blue Whale/Dolphin) - –í–ê–®–ê –ò–ö–û–ù–ö–ê 3 */
        .circle-item:nth-child(4) { 
            bottom: 40px;
            right: 30px;
            animation-delay: 2s;
            /* === –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û–¢ URL –ù–ê –°–í–û–ô (–∏–∫–æ–Ω–∫–∞ —Ä–æ–±–æ—Ç–∞/–∫–∏—Ç–∞) === */
            background-image: url('https://avatars.mds.yandex.net/i?id=ebf169d41433e2d2c1be2081881ca1a3ee4bff2b-4600463-images-thumbs&n=13');
            background-size: 80%;
            /* background-color: #007AFF; /* –£–ë–†–ê–ù–û: —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ */
        }

        
        /* 4. –ò–ö–û–ù–ö–ê 4 */
        .circle-item:nth-child(5) { 
            bottom: 10px; left: 40px; animation-delay: 3s; 
            /* === –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û–¢ URL –ù–ê –°–í–û–ô === */
            background-image: url('https://avatars.mds.yandex.net/i?id=ec3f3a85560aa891621d0b7de06b130dec700313-5480663-images-thumbs&n=13'); 
        }
        
        /* 5. –ò–ö–û–ù–ö–ê 5 */
        .circle-item:nth-child(6) { 
            top: 70px; left: 10px; animation-delay: 4s;
            /* === –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û–¢ URL –ù–ê –°–í–û–ô === */
            background-image: url('https://avatars.mds.yandex.net/i?id=b55adaff5419e5f601e836d756843795ece7f587-8552056-images-thumbs&n=13'); 
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-25px) rotate(8deg); }
        }

        .onboarding-title {
            font-size: 32px;
            font-weight: 800;
            text-align: center;
            background: linear-gradient(90deg, var(--tg-theme-link-color), var(--task-price-color));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            color: transparent;
            margin-bottom: 16px;
        }
        .onboarding-subtitle {
            font-size: 18px;
            color: var(--tg-theme-hint-color);
            text-align: center;
            margin-bottom: 60px;
        }
        .onboarding-btn {
            background: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            border-radius: 16px;
            padding: 18px 70px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        }
        .onboarding-btn:active { transform: scale(0.95); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
    </style>
</head>
<body>

    <div id="onboarding-screen">
        <div class="logo-circle">
            <div id="center-lottie" class="lottie-icon"></div>
            <div class="circle-item"></div> 
            <div class="circle-item"></div>
            <div class="circle-item"></div>
            <div class="circle-item"></div>
            <div class="circle-item"></div> 
        </div>
        <div class="onboarding-title">WebXStudio</div>
        <div class="onboarding-subtitle">–í—ã–ø–æ–ª–Ω—è–π –∑–∞–¥–∞–Ω–∏—è ‚Äî –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏</div>
        <button class="onboarding-btn" onclick="closeOnboarding()">–ù–∞—á–∞—Ç—å</button>
    </div>

    <div id="app-container" style="display: none;">
        
        <div id="screen-tasks" class="app-screen">
            <div class="header" style="justify-content: space-between; padding-right: 25px;">
                 –ó–∞–¥–∞–Ω–∏—è
                 <span style="font-size: 20px;">‚öôÔ∏è</span>
            </div>
            
            <div class="task-filters">
                <div class="filter-button active" onclick="filterTasks('all')">–í—Å–µ (6)</div>
                <div class="filter-button" onclick="filterTasks('text')">–¢–µ–∫—Å—Ç–æ–≤—ã–µ</div>
                <div class="filter-button" onclick="filterTasks('photo')">–§–æ—Ç–æ/–ò–ò</div>
            </div>
            
            <div class="content-wrap task-list" id="task-list">
                
                <div class="task-item task-photo">
                    <div class="task-left">
                        <div class="task-icon">üå≥</div> 
                        <div class="task-info-main">
                            <div class="task-title">–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é</div>
                            <div class="task-hint">520 ‚ÇΩ ‚Ä¢ 3 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('photo_tree', '–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é', 520, 'photo', '–°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –¥–µ—Ä–µ–≤–∞, –≤—ã—Å–æ—Ç–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ –±—É–¥–µ—Ç –±–æ–ª—å—à–µ, —á–µ–º 3 –º–µ—Ç—Ä–∞. –§–æ—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–æ—Ç–æ.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

                <div class="task-item task-text">
                    <div class="task-left">
                        <div class="task-icon">‚úçÔ∏è</div> 
                        <div class="task-info-main">
                            <div class="task-title">–ù–∞–ø–∏—Å–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç–∑—ã–≤</div>
                            <div class="task-hint">800 ‚ÇΩ ‚Ä¢ 3 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('review', '–ù–∞–ø–∏—Å–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç–∑—ã–≤ –æ –ø—Ä–æ–¥—É–∫—Ç–µ', 800, 'text', '–ù–∞–ø–∏—à–∏—Ç–µ –Ω–µ–±–æ–ª—å—à–æ–π, –Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–∑—ã–≤ –æ –ø—Ä–æ–¥—É–∫—Ç–µ (500-800 —Å–∏–º–≤–æ–ª–æ–≤). –í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

                <div class="task-item task-text">
                    <div class="task-left">
                        <div class="task-icon">üåê</div>
                        <div class="task-info-main">
                            <div class="task-title">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç</div>
                            <div class="task-hint">550 ‚ÇΩ ‚Ä¢ 2 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('translate', '–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç —Å –∞–Ω–≥–ª. –Ω–∞ —Ä—É—Å.', 550, 'text', '–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç (–æ–∫–æ–ª–æ 1500 —Å–∏–º–≤–æ–ª–æ–≤) –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫. –í—Å—Ç–∞–≤—å—Ç–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

                <div class="task-item task-text">
                    <div class="task-left">
                        <div class="task-icon">üé•</div>
                        <div class="task-info-main">
                            <div class="task-title">–û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è YouTube-–≤–∏–¥–µ–æ</div>
                            <div class="task-hint">650 ‚ÇΩ ‚Ä¢ 2 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('video_desc', '–°–æ—Å—Ç–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è YouTube', 650, 'text', '–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Ü–µ–ø–ª—è—é—â–µ–µ SEO-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ –æ –±–∏–∑–Ω–µ—Å–µ –≤ IT. –¢—Ä–µ–±—É–µ–º—ã–π –æ–±—ä–µ–º: 300 —Å–ª–æ–≤. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

                <div class="task-item task-photo">
                    <div class="task-left">
                        <div class="task-icon">ü§ñ</div>
                        <div class="task-info-main">
                            <div class="task-title">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–æ—Ç–∏–ø</div>
                            <div class="task-hint">900 ‚ÇΩ ‚Ä¢ 1 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('logo_gen', '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–æ—Ç–∏–ø –≤ Midjourney', 900, 'photo', '–ò—Å–ø–æ–ª—å–∑—É—è Midjourney, —Å–æ–∑–¥–∞–π—Ç–µ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ –¥–ª—è IT-–∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ –≤ —Å—Ç–∏–ª–µ –º–∏–Ω–∏–º–∞–ª–∏–∑–º. –ü—Ä–∏—à–ª–∏—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

                <div class="task-item task-text">
                    <div class="task-left">
                        <div class="task-icon">üë§</div>
                        <div class="task-info-main">
                            <div class="task-title">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</div>
                            <div class="task-hint">350 ‚ÇΩ ‚Ä¢ 1 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('new_user', '–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 350, 'text', '–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π, –Ω–æ —É–±–µ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–∞–Ω–∞–ª. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>
                
            </div>
        </div>

        <div id="screen-details" class="app-screen" style="display: none;">
            <div class="header">
                <span class="back-arrow" onclick="showScreen('tasks')">‚Üê</span>
                <span id="detail-title">–ù–∞–ø–∏—Å–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç–∑—ã–≤</span>
            </div>
            <div class="content-wrap">
                <div id="detail-price" class="task-detail-price">800 ‚ÇΩ</div>
                
                <h4 style="margin-bottom: 5px;">–£—Å–ª–æ–≤–∏–µ:</h4>
                <p id="detail-description" style="margin-top: 0; font-size: 15px;">
                    –¢—É—Ç –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏.
                </p>

                <h4 id="upload-instruction" style="margin-bottom: 5px;">–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
                <div id="task-images-area" class="task-detail-images">
                    <div id="upload-field" class="upload-area" onclick="handleUploadClick()">
                        <span class="upload-icon">‚ùì</span>
                        <span>–ù–∞–∂–º–∏—Ç–µ "–í–´–ü–û–õ–ù–ò–¢–¨" –¥–ª—è –Ω–∞—á–∞–ª–∞...</span>
                    </div>
                </div>
                
                <p style="font-size: 13px; color: var(--tg-theme-hint-color);">
                    *–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª/—Å–∫—Ä–∏–Ω—à–æ—Ç/—Ç–µ–∫—Å—Ç.
                </p>
            </div>
        </div>
        
        <div id="photo-modal" class="modal" onclick="closeModal()">
            <div class="modal-content" onclick="event.stopPropagation()">
                 <div class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–æ—Ç–æ</div>
                 <div class="modal-option" onclick="simulateUpload('–ö–∞–º–µ—Ä–∞')">–ö–∞–º–µ—Ä–∞</div>
                 <div class="modal-option" onclick="simulateUpload('–ì–∞–ª–µ—Ä–µ—è')">–ì–∞–ª–µ—Ä–µ—è</div>
                 <div class="modal-option" onclick="simulateUpload('–§–∞–π–ª—ã')">–§–∞–π–ª—ã</div>
                 <div class="modal-option" style="color: var(--tg-theme-text-color);">–û—Ç–º–µ–Ω–∞</div>
            </div>
        </div>
        
        <div id="text-modal" class="modal" onclick="closeModal()">
            <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-title">–í—Å—Ç–∞–≤—å—Ç–µ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç</div>
                <textarea id="text-input" style="width: 100%; height: 100px; padding: 10px; box-sizing: border-box; border: 1px solid var(--tg-theme-hint-color); border-radius: 8px; font-size: 15px; background-color: var(--tg-theme-secondary-bg-color); color: var(--tg-theme-text-color);" placeholder="–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç..."></textarea>
                <div class="modal-option" style="color: var(--tg-theme-button-color);" onclick="simulateTextUpload()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</div>
                <div class="modal-option" style="color: var(--tg-theme-text-color);">–û—Ç–º–µ–Ω–∞</div>
            </div>
        </div>

        <div id="screen-wallet" class="app-screen" style="display: none;">
            <div class="header" style="justify-content: space-between; padding-right: 25px;">
                 –ö–æ—à–µ–ª—ë–∫
                 <span style="font-size: 20px;"></span>
            </div>
            
            <div class="wallet-balance-wrap">
                –ë–∞–ª–∞–Ω—Å:
                <div id="wallet-balance-value" class="wallet-balance">8 950 ‚ÇΩ</div>
                <span style="font-size: 20px; cursor: pointer;">
                    <span class="icon">
                        <span style="font-weight: 500; font-size: 20px;" onclick="toggleBalanceVisibility()">
                            &#128065;
                        </span>
                    </span>
                </div>
            </div>
            
            <div class="wallet-actions">
                <div class="wallet-action-item" onclick="alert('–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞')">
                    <div class="icon">‚Üë</div>
                    <span style="color: var(--tg-theme-link-color);">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
                </div>
                <div class="wallet-action-item" onclick="alert('–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤')"> 
                    <div class="icon">+</div>
                    <span style="color: var(--tg-theme-link-color);">–í–´–í–û–î</span>
                </div>
                <div class="wallet-action-item" onclick="alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏')">
                    <div class="icon">...</div>
                    <span style="color: var(--tg-theme-link-color);">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </div>
            </div>
            
            <div class="content-wrap">
                <h3 style="margin-top: 20px; font-weight: 600;">–û–ø–µ—Ä–∞—Ü–∏–∏</h3>
                <div class="transaction-list">
                    <div class="transaction-item">
                        <div style="display: flex; align-items: center;">
                            <div class="nav-icon" style="margin-right: 10px; font-size: 18px; color: var(--tg-theme-link-color);">‚Üë</div>
                            <div>
                                <div class="transaction-amount-text">8 950 ‚ÇΩ</div>
                                <div class="task-hint">3 –¥–µ–∫. 2025, 15:45</div>
                            </div>
                        </div>
                        <div class="transaction-card-info">
                            **** 2843<br><span class="mir-logo">–ú–ò–†</span>
                        </div>
                    </div>
                    <div class="transaction-item">
                         <div style="display: flex; align-items: center;">
                            <div class="nav-icon" style="margin-right: 10px; font-size: 18px; color: var(--tg-theme-link-color);">‚Üë</div>
                            <div>
                                <div class="transaction-amount-text">2 350 ‚ÇΩ</div>
                                <div class="task-hint">2 –¥–µ–∫. 2025, 18:30</div>
                            </div>
                        </div>
                        <div class="transaction-card-info">
                            **** 2843<br><span class="mir-logo">–ú–ò–†</span>
                        </div>
                    </div>
                    <div class="transaction-item">
                        <div style="display: flex; align-items: center;">
                            <div class="nav-icon" style="margin-right: 10px; font-size: 18px; color: var(--tg-theme-link-color);">‚Üë</div>
                            <div>
                                <div class="transaction-amount-text">10 200 ‚ÇΩ</div>
                                <div class="task-hint">1 –¥–µ–∫. 2025, 12:12</div>
                            </div>
                        </div>
                        <div class="transaction-card-info">
                            **** 2843<br><span class="mir-logo">–ú–ò–†</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="screen-moderation" class="app-screen" style="display: none; text-align: center; padding-top: 150px;">
            <h2 id="moderation-status">–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏...</h2>
            <p style="font-size: 20px;">‚è≥</p>
        </div>
        
         <div id="screen-approval" class="app-screen" style="display: none; text-align: center; padding-top: 150px;">
            <h2 id="approval-status" style="color: var(--task-price-color);">‚úÖ –ó–∞–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–æ!</h2>
            <p style="font-size: 20px;">–°—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞—á–∏—Å–ª–µ–Ω—ã –Ω–∞ –í–∞—à –±–∞–ª–∞–Ω—Å.</p>
        </div>

    </div>
    
    <div class="bottom-nav" style="display: none;">
        <div id="nav-tasks" class="nav-item active" onclick="showScreen('tasks')">
            <div class="nav-icon">‚ò∞</div>
            <div>–ó–∞–¥–∞–Ω–∏—è</div>
        </div>
        <div id="nav-home" class="nav-item" onclick="showScreen('home')">
            <div class="nav-icon">üè†</div>
            <div>–î–æ–º–∏–∫</div>
        </div>
        <div id="nav-wallet" class="nav-item" onclick="showScreen('wallet')">
            <div class="nav-icon">üí≥</div>
            <div>–ö–æ—à–µ–ª–µ–∫</div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const mainButton = tg.MainButton;
        
        let currentTaskId = null; 
        let currentTaskPrice = 0;
        let currentTaskType = null; // 'photo' –∏–ª–∏ 'text'
        let isFileUploaded = false; 
        let currentBalance = 8950; 
        
        const formatCurrency = (amount) => `${amount.toLocaleString('ru-RU')} ‚ÇΩ`;

        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TG –ò –¢–ï–ú–´ ===
        tg.ready();
        
        if (tg.themeParams) {
            for (const key in tg.themeParams) {
                document.documentElement.style.setProperty(`--tg-${key}`, tg.themeParams[key]);
            }
        }
        
        function updateBalanceUI() {
            document.getElementById('wallet-balance-value').innerText = formatCurrency(currentBalance);
        }

        // === LOTTIE –ê–ù–ò–ú–ê–¶–ò–ò –ò –û–ù–ë–û–†–î–ò–ù–ì ===
        // –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ URL –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
        const lottieUrls = [
            "https://cdn.lottiefiles.com/packages/lf20_6CqhC0.json", // –ü–∏—Å—å–º–æ/–ö–æ–Ω–≤–µ—Ä—Ç (–¶–µ–Ω—Ç—Ä)
        ];
        
        function loadLottie(container, url, speed = 1) {
            lottie.loadAnimation({
                container: container,
                renderer: 'svg',
                loop: true,
                autoplay: true,
                path: url
            }).setSpeed(speed);
        }

        function initLottie() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
            loadLottie(document.getElementById('center-lottie'), lottieUrls[0], 0.8); 
            
            // !!! –ë–û–ö–û–í–´–ï –≠–õ–ï–ú–ï–ù–¢–´ –¢–ï–ü–ï–†–¨ –ó–ê–ì–†–£–ñ–ê–Æ–¢–°–Ø –ß–ï–†–ï–ó CSS !!!
        }

        function closeOnboarding() {
            const onboarding = document.getElementById('onboarding-screen');
            onboarding.style.animation = 'fadeOut 0.3s forwards';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            document.getElementById('app-container').style.display = 'block';
            document.querySelector('.bottom-nav').style.display = 'flex';
            
            setTimeout(() => {
                onboarding.style.display = 'none';
                showScreen('tasks'); // –ü–æ—Å–ª–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–¥–∞–Ω–∏—è
            }, 300);
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º Lottie –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = initLottie;


        // --- –û–ë–†–ê–ë–û–¢–ß–ò–ö –ì–õ–ê–í–ù–û–ô –ö–ù–û–ü–ö–ò (–£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô) ---
        mainButton.onClick(() => {
            const buttonText = mainButton.text;
            if (buttonText === '–í–´–ü–û–õ–ù–ò–¢–¨') {
                startExecution();
            } else if (buttonText === '–ó–ê–í–ï–†–®–ò–¢–¨') {
                finishTaskExecution();
            } else if (buttonText === '–ó–ê–ü–†–û–°–ò–¢–¨ –í–´–í–û–î') {
                initiateWithdrawal();
            }
        });

        // --- –õ–æ–≥–∏–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω ---
        function openModal(id) {
            document.getElementById(id).style.display = 'flex';
        }
        function closeModal() {
            document.getElementById('photo-modal').style.display = 'none';
            document.getElementById('text-modal').style.display = 'none';
        }

        // --- –õ–û–ì–ò–ö–ê –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –≠–ö–†–ê–ù–û–í (SPA) ---
        function showScreen(screenName) {
            if (screenName === 'home') {
                 alert('–†–∞–∑–¥–µ–ª "–î–æ–º–∏–∫" –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.');
                 return;
            }

            document.querySelectorAll('.app-screen').forEach(screen => {
                screen.style.display = 'none';
            });
            mainButton.hide();

            const screenElement = document.getElementById(`screen-${screenName}`);
            if (screenElement) {
                screenElement.style.display = 'block';
            }

            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            const navItem = document.getElementById(`nav-${screenName}`);
            if (navItem) {
                navItem.classList.add('active');
            }

            if (screenName === 'wallet') {
                updateBalanceUI();
                if (currentBalance > 0) {
                    mainButton.setText('–ó–ê–ü–†–û–°–ò–¢–¨ –í–´–í–û–î');
                    mainButton.setParams({ is_active: true, is_visible: true, color: tg.themeParams.button_color || '#007AFF' });
                }
            } else if (screenName === 'details') {
                mainButton.setText('–í–´–ü–û–õ–ù–ò–¢–¨');
                mainButton.setParams({ is_active: true, is_visible: true, color: tg.themeParams.button_color || '#007AFF' });
                resetUploadField();
            } 
        }

        // --- –õ–û–ì–ò–ö–ê –û–¢–ö–†–´–¢–ò–Ø –î–ï–¢–ê–õ–ï–ô –ó–ê–î–ê–ù–ò–Ø ---
        function openTaskDetails(id, title, price, type, description) {
            currentTaskId = id;
            currentTaskPrice = price;
            // –¢–∏–ø –∑–∞–¥–∞–Ω–∏—è: 'photo' (—Å—Ç–∞—Ä—ã–µ/–∏–∏) –∏–ª–∏ 'text' (–Ω–æ–≤—ã–µ)
            currentTaskType = (type === '–¢–µ–∫—Å—Ç–æ–≤—ã–µ') ? 'text' : 'photo'; 
            
            document.getElementById('detail-title').innerText = title;
            document.getElementById('detail-price').innerText = formatCurrency(price);
            document.getElementById('detail-description').innerText = description;
            
            showScreen('details');
        }
        
        // --- –õ–û–ì–ò–ö–ê –§–ò–õ–¨–¢–†–ê–¶–ò–ò ---
        function filterTasks(category) {
            const list = document.getElementById('task-list');
            const tasks = list.querySelectorAll('.task-item');
            let count = 0;

            tasks.forEach(task => {
                const isText = task.classList.contains(`task-text`);
                const isPhoto = task.classList.contains(`task-photo`) || task.classList.contains(`task-ai`);

                if (category === 'all' || 
                    (category === 'text' && isText) ||
                    (category === 'photo' && isPhoto)) 
                {
                    task.style.display = 'flex';
                    count++;
                } else {
                    task.style.display = 'none';
                }
            });
            
            document.querySelectorAll('.filter-button').forEach(btn => btn.classList.remove('active'));
            const activeFilter = document.querySelector(`.filter-button[onclick="filterTasks('${category}')"]`);
            if (activeFilter) {
                activeFilter.classList.add('active');
                activeFilter.innerText = activeFilter.innerText.split('(')[0].trim() + ` (${count})`;
            }
        }
        
        // --- –®–∞–≥ 1: –ù–∞—á–∏–Ω–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ---
        function startExecution() {
            const uploadField = document.getElementById('upload-field');
            uploadField.onclick = handleUploadClick;
            
            if (currentTaskType === 'photo') {
                uploadField.innerHTML = '<span class="upload-icon">üì∑</span><span>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ/—Å–∫—Ä–∏–Ω—à–æ—Ç</span>';
            } else if (currentTaskType === 'text') {
                uploadField.innerHTML = '<span class="upload-icon">üìù</span><span>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç</span>';
            }
            
            mainButton.setText('–ó–ê–í–ï–†–®–ò–¢–¨');
            mainButton.setParams({ 
                is_active: false,
                is_visible: true,
                color: tg.themeParams.hint_color
            }); 
            
            alert('–ó–∞–¥–∞–Ω–∏–µ –Ω–∞—á–∞—Ç–æ! –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ –æ–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏.');
        }

        // --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –æ–±–ª–∞—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏ ---
        function handleUploadClick() {
            if (currentTaskType === 'photo') {
                openModal('photo-modal');
            } else if (currentTaskType === 'text') {
                 // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º
                document.getElementById('text-input').value = '';
                openModal('text-modal');
            }
        }

        // --- –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞/—Ñ–æ—Ç–æ ---
        function simulateUpload(source) {
            closeModal();
            const uploadField = document.getElementById('upload-field');
            
            uploadField.innerHTML = `<span class="upload-icon">‚úÖ</span><span>–§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω (${source}). –ù–∞–∂–º–∏—Ç–µ "–ó–ê–í–ï–†–®–ò–¢–¨"</span>`;
            uploadField.classList.add('uploaded');
            uploadField.onclick = null;
            isFileUploaded = true;

            mainButton.setParams({
                is_active: true,
                color: tg.themeParams.button_color || '#007AFF'
             });
        }
        
        // --- –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞ ---
        function simulateTextUpload() {
             const textInput = document.getElementById('text-input').value;
             if (textInput.trim().length < 50) { // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã
                 alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –±–æ–ª–µ–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç (–º–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤)!');
                 return;
             }
             
             closeModal();
             const uploadField = document.getElementById('upload-field');
             
             uploadField.innerHTML = '<span class="upload-icon">‚úÖ</span><span>–¢–µ–∫—Å—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω (–≥–æ—Ç–æ–≤–æ –∫ –º–æ–¥–µ—Ä–∞—Ü–∏–∏).</span>';
             uploadField.classList.add('uploaded');
             uploadField.onclick = null;
             isFileUploaded = true;

              mainButton.setParams({
                 is_active: true,
                 color: tg.themeParams.button_color || '#007AFF'
              });
        }

        function resetUploadField() {
            const uploadField = document.getElementById('upload-field');
            uploadField.innerHTML = '<span class="upload-icon">‚ùì</span><span>–ù–∞–∂–º–∏—Ç–µ "–í–´–ü–û–õ–ù–ò–¢–¨" –¥–ª—è –Ω–∞—á–∞–ª–∞...</span>';
            uploadField.classList.remove('uploaded');
            uploadField.onclick = null;
            isFileUploaded = false;
        }


        // --- –®–∞–≥ 2: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è ---
        function finishTaskExecution() {
            if (!isFileUploaded) {
                alert('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º!');
                return;
            }
            
            showScreen('moderation');
            document.getElementById('moderation-status').innerText = '–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏...';
            mainButton.hide();

            setTimeout(() => {
                currentBalance += currentTaskPrice;
                
                showScreen('approval'); 
                document.getElementById('approval-status').innerText = `‚úÖ –ó–∞–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–æ! (+${formatCurrency(currentTaskPrice)})`;
                document.getElementById('approval-status').style.color = 'var(--task-price-color)';

                tg.sendData(JSON.stringify({ 
                    action: "task_approved", 
                    task_id: currentTaskId, 
                    amount: currentTaskPrice 
                })); 

                setTimeout(() => {
                    showScreen('wallet');
                }, 2000); 
            }, 3000); 
        }
        
        // --- –õ–û–ì–ò–ö–ê –í–´–í–û–î–ê –°–†–ï–î–°–¢–í ---
        function initiateWithdrawal() {
            showScreen('moderation');
            document.getElementById('moderation-status').innerText = '–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è...';
            mainButton.hide();
            
            const withdrawalAmount = currentBalance; 

            setTimeout(() => {
                showScreen('approval');
                document.getElementById('approval-status').innerText = `üí∏ –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ ${formatCurrency(withdrawalAmount)} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!`;
                document.getElementById('approval-status').style.color = 'var(--tg-theme-text-color)';
                
                currentBalance = 0; 
                
                tg.sendData(JSON.stringify({ 
                    action: "withdrawal_request", 
                    amount: withdrawalAmount, 
                    user_id: tg.initDataUnsafe.user.id 
                }));
                
                setTimeout(() => {
                    showScreen('wallet');
                }, 2000); 
            }, 4000); 
        }
        
        // --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è/–ø–æ–∫–∞–∑–∞ –±–∞–ª–∞–Ω—Å–∞ ---
        function toggleBalanceVisibility() {
            const balanceElement = document.getElementById('wallet-balance-value');
            if (balanceElement.innerText.includes('****')) {
                balanceElement.innerText = formatCurrency(currentBalance);
            } else {
                balanceElement.innerText = '**** ‚ÇΩ';
            }
        }

    </script>
</body>
</html>
