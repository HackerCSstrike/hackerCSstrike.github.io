<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>WebXStudio: –ó–∞–¥–∞–Ω–∏—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* ================================================= */
        /* –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò (MOBILE FIRST) */
        /* ================================================= */
        :root {
            --tg-text-color: #000000;
            --tg-bg-color: #FFFFFF;
            --tg-secondary-bg-color: #F8F8F8;
            --tg-hint-color: #9C9C9C;
            --tg-link-color: #007AFF;
            --tg-button-color: #007AFF; 
            --tg-button-text-color: #FFFFFF;
            --task-price-color: #4CAF50; /* –ó–µ–ª–µ–Ω—ã–π –¥–ª—è —Ü–µ–Ω */
            --mir-logo-color: #FF7B00; /* –¶–≤–µ—Ç –¥–ª—è –ú–ò–† */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0 0 70px 0;
            background-color: var(--tg-theme-bg-color, var(--tg-bg-color));
            color: var(--tg-theme-text-color, var(--tg-text-color));
            overflow-x: hidden;
            -webkit-user-select: none;
            user-select: none;
            min-height: 100vh;
        }
        
        /* –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, —Å—Ç—Ä–µ–ª–æ–∫ –∏ –æ—Ç—Å—Ç—É–ø–æ–≤ */
        .header {
            display: flex;
            align-items: center;
            padding: 15px;
            font-size: 17px;
            font-weight: 600;
            line-height: 22px;
        }
        .back-arrow {
            font-size: 24px;
            margin-right: 15px;
            cursor: pointer;
            font-weight: 400;
        }
        .content-wrap {
            padding: 0 15px;
        }

        /* --- –§–∏–ª—å—Ç—Ä—ã --- */
        .task-filters {
            display: flex;
            overflow-x: scroll;
            padding: 0 15px 15px 15px;
            margin: 0 -15px;
            gap: 8px;
            -webkit-overflow-scrolling: touch;
        }
        .task-filters::-webkit-scrollbar { display: none; }

        .filter-button {
            flex-shrink: 0;
            padding: 7px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        .filter-button.active {
            background-color: var(--tg-theme-button-color, var(--tg-button-color));
            color: var(--tg-theme-button-text-color, var(--tg-button-text-color));
        }
        .filter-button:not(.active) {
            background-color: var(--tg-theme-secondary-bg-color, #EFEFEF);
            color: var(--tg-theme-text-color, var(--tg-text-color));
        }

        /* --- –°—Ç–∏–ª–∏ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞–Ω–∏–π --- */
        .task-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--tg-theme-secondary-bg-color, #EFEFEF);
        }
        .task-left {
            display: flex;
            align-items: center;
        }
        .task-icon {
            width: 40px; height: 40px; border-radius: 8px;
            display: flex; justify-content: center; align-items: center;
            background-color: var(--tg-theme-secondary-bg-color);
            margin-right: 12px; font-size: 20px;
        }
        .task-info-main { flex-grow: 1; }
        .task-title { font-weight: 500; font-size: 16px; }
        .task-hint { font-size: 13px; color: var(--tg-theme-hint-color); }
        .task-action-btn {
            padding: 6px 12px;
            background-color: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            border-radius: 18px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            flex-shrink: 0;
            margin-left: 15px;
        }

        /* --- –°—Ç–∏–ª–∏ –¥–µ—Ç–∞–ª–µ–π –∑–∞–¥–∞–Ω–∏—è --- */
        .task-detail-price {
            font-size: 40px;
            font-weight: 700;
            color: var(--task-price-color);
            margin: 10px 0;
        }
        .task-detail-images {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            /* –ò–∑–º–µ–Ω–µ–Ω–æ –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ */
            flex-direction: column; 
        }
        .upload-area {
            width: 100%;
            height: 80px;
            border: 2px dashed var(--tg-theme-hint-color);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16px;
            color: var(--tg-theme-hint-color);
            cursor: pointer;
            transition: all 0.2s;
            box-sizing: border-box;
        }
        .upload-area.uploaded {
            border: 2px solid var(--task-price-color);
            background-color: rgba(76, 175, 80, 0.1);
            color: var(--task-price-color);
        }
        .upload-icon { margin-right: 10px; font-size: 20px; }

        /* --- –°—Ç–∏–ª–∏ –∫–æ—à–µ–ª—å–∫–∞ --- */
        .wallet-balance-wrap { 
            text-align: center; 
            padding: 20px 0 10px 0; 
            line-height: 1.2;
            color: var(--tg-theme-hint-color);
        }
        .wallet-balance {
            font-size: 40px;
            font-weight: 700;
            margin: 10px 0;
            color: var(--tg-theme-text-color);
        }
        .wallet-actions {
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            border-bottom: 1px solid var(--tg-theme-secondary-bg-color);
        }
        .wallet-action-item {
            text-align: center;
            cursor: pointer;
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }
        .wallet-action-item .icon {
            font-size: 24px;
            margin-bottom: 5px;
            background-color: var(--tg-theme-secondary-bg-color);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 5px auto;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--tg-theme-secondary-bg-color);
        }
        .transaction-amount-text {
            font-weight: 600;
            color: var(--tg-theme-text-color); 
        }
        .transaction-card-info {
            font-size: 13px;
            color: var(--tg-theme-hint-color);
            text-align: right;
        }
        .mir-logo { color: var(--mir-logo-color); font-weight: bold; }

        /* --- –ù–∏–∂–Ω–µ–µ –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –ú–µ–Ω—é --- */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            display: flex; justify-content: space-around; align-items: center;
            height: 60px;
            background-color: var(--tg-theme-secondary-bg-color, #F8F8F8);
            border-top: 1px solid #D1D1D1; z-index: 1000;
        }
        .nav-item {
            flex: 1; text-align: center; color: var(--tg-theme-hint-color); padding: 5px 0;
        }
        .nav-item.active { color: var(--tg-theme-text-color); font-weight: 600; }
        .nav-icon { font-size: 24px; }
    </style>
</head>
<body>

    <div id="app-container">
        
        <div id="screen-tasks" class="app-screen">
            <div class="header" style="justify-content: space-between; padding-right: 25px;">
                 –ó–∞–¥–∞–Ω–∏—è
                 <span style="font-size: 20px;">‚öôÔ∏è</span>
            </div>
            
            <div class="task-filters">
                <div class="filter-button active" onclick="filterTasks('all')">–í—Å–µ (5)</div>
                <div class="filter-button" onclick="filterTasks('text')">–¢–µ–∫—Å—Ç–æ–≤—ã–µ</div>
                <div class="filter-button" onclick="filterTasks('ai')">–ò–ò</div>
            </div>
            
            <div class="content-wrap task-list" id="task-list">
                <div class="task-item task-text">
                    <div class="task-left">
                        <div class="task-icon">‚úçÔ∏è</div> 
                        <div class="task-info-main">
                            <div class="task-title">–ù–∞–ø–∏—Å–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç–∑—ã–≤</div>
                            <div class="task-hint">800 ‚ÇΩ ‚Ä¢ 3 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('review', '–ù–∞–ø–∏—Å–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç–∑—ã–≤ –æ –ø—Ä–æ–¥—É–∫—Ç–µ', 800, '–¢–µ–∫—Å—Ç–æ–≤—ã–µ', '–ù–∞–ø–∏—à–∏—Ç–µ –Ω–µ–±–æ–ª—å—à–æ–π, –Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–∑—ã–≤ –æ –ø—Ä–æ–¥—É–∫—Ç–µ (500-800 —Å–∏–º–≤–æ–ª–æ–≤). –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –≤ –≤–∏–¥–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

                <div class="task-item task-text">
                    <div class="task-left">
                        <div class="task-icon">üåê</div>
                        <div class="task-info-main">
                            <div class="task-title">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç</div>
                            <div class="task-hint">550 ‚ÇΩ ‚Ä¢ 3 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('translate', '–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç —Å –∞–Ω–≥–ª. –Ω–∞ —Ä—É—Å.', 550, '–¢–µ–∫—Å—Ç–æ–≤—ã–µ', '–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç (–æ–∫–æ–ª–æ 1500 —Å–∏–º–≤–æ–ª–æ–≤) –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫. –°–¥–∞–π—Ç–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ .doc –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–∞.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

                 <div class="task-item task-text">
                    <div class="task-left">
                        <div class="task-icon">üé•</div>
                        <div class="task-info-main">
                            <div class="task-title">–û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è YouTube-–≤–∏–¥–µ–æ</div>
                            <div class="task-hint">650 ‚ÇΩ ‚Ä¢ 2 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('video_desc', '–°–æ—Å—Ç–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è YouTube', 650, '–¢–µ–∫—Å—Ç–æ–≤—ã–µ', '–ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Ü–µ–ø–ª—è—é—â–µ–µ SEO-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ –æ –±–∏–∑–Ω–µ—Å–µ –≤ IT. –¢—Ä–µ–±—É–µ–º—ã–π –æ–±—ä–µ–º: 300 —Å–ª–æ–≤. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Ñ–∞–π–ª–æ–º.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

                <div class="task-item task-ai">
                    <div class="task-left">
                        <div class="task-icon">ü§ñ</div>
                        <div class="task-info-main">
                            <div class="task-title">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–æ—Ç–∏–ø</div>
                            <div class="task-hint">900 ‚ÇΩ ‚Ä¢ 2 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('logo_gen', '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–æ—Ç–∏–ø –≤ Midjourney', 900, '–ò–ò', '–ò—Å–ø–æ–ª—å–∑—É—è Midjourney, —Å–æ–∑–¥–∞–π—Ç–µ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ –¥–ª—è IT-–∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ –≤ —Å—Ç–∏–ª–µ –º–∏–Ω–∏–º–∞–ª–∏–∑–º. –ü—Ä–∏—à–ª–∏—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

                <div class="task-item task-text">
                    <div class="task-left">
                        <div class="task-icon">‚ùì</div>
                        <div class="task-info-main">
                            <div class="task-title">–û—Ç–≤–µ—Ç—ã –Ω–∞ 10 –≤–æ–ø—Ä–æ—Å–æ–≤</div>
                            <div class="task-hint">480 ‚ÇΩ ‚Ä¢ 1 –¥–µ–∫. 2025</div>
                        </div>
                    </div>
                    <button class="task-action-btn" onclick="openTaskDetails('qa', '–û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã', 480, '–¢–µ–∫—Å—Ç–æ–≤—ã–µ', '–î–∞–π—Ç–µ –∫—Ä–∞—Ç–∫–∏–µ –∏ —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç–µ–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Telegram-–±–æ—Ç–æ–≤. –ü—Ä–∏—à–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Ñ–∞–π–ª–æ–º –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–º.')">
                        –í—ã–ø–æ–ª–Ω–∏—Ç—å
                    </button>
                </div>

            </div>
        </div>

        <div id="screen-details" class="app-screen" style="display: none;">
            <div class="header">
                <span class="back-arrow" onclick="showScreen('tasks')">‚Üê</span>
                <span id="detail-title">–ù–∞–ø–∏—Å–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç–∑—ã–≤</span>
            </div>
            <div class="content-wrap">
                <div id="detail-price" class="task-detail-price">800 ‚ÇΩ</div>
                
                <h4 style="margin-bottom: 5px;">–£—Å–ª–æ–≤–∏–µ:</h4>
                <p id="detail-description" style="margin-top: 0; font-size: 15px;">
                    –¢—É—Ç –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏.
                </p>

                <h4 id="upload-instruction" style="margin-bottom: 5px;">–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
                <div id="task-images-area" class="task-detail-images">
                    <div id="upload-field" class="upload-area" onclick="simulateUpload()">
                        <span class="upload-icon">üìÅ</span>
                        <span>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ / —Å–∫—Ä–∏–Ω—à–æ—Ç–∞</span>
                    </div>
                </div>
                
                <p style="font-size: 13px; color: var(--tg-theme-hint-color);">
                    *–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª/—Å–∫—Ä–∏–Ω—à–æ—Ç.
                </p>
                </div>
        </div>

        <div id="screen-wallet" class="app-screen" style="display: none;">
            <div class="header" style="justify-content: space-between; padding-right: 25px;">
                 –ö–æ—à–µ–ª—ë–∫
                 <span style="font-size: 20px;"></span>
            </div>
            
            <div class="wallet-balance-wrap">
                –ë–∞–ª–∞–Ω—Å:
                <div id="wallet-balance-value" class="wallet-balance">8 950 ‚ÇΩ</div>
                <span style="font-size: 20px; cursor: pointer;">
                    <span class="icon">
                        <span style="font-weight: 500; font-size: 20px;" onclick="toggleBalanceVisibility()">
                            &#128065;
                        </span>
                    </span>
                </span>
            </div>
            
            <div class="wallet-actions">
                <div class="wallet-action-item" onclick="alert('–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞')">
                    <div class="icon">‚Üë</div>
                    <span style="color: var(--tg-theme-link-color);">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
                </div>
                <div class="wallet-action-item" onclick="alert('–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤')"> 
                    <div class="icon">+</div>
                    <span style="color: var(--tg-theme-link-color);">–í–´–í–û–î</span>
                </div>
                <div class="wallet-action-item" onclick="alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏')">
                    <div class="icon">...</div>
                    <span style="color: var(--tg-theme-link-color);">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </div>
            </div>
            
            <div class="content-wrap">
                <h3 style="margin-top: 20px; font-weight: 600;">–û–ø–µ—Ä–∞—Ü–∏–∏</h3>
                <div class="transaction-list">
                    <div class="transaction-item">
                        <div style="display: flex; align-items: center;">
                            <div class="nav-icon" style="margin-right: 10px; font-size: 18px; color: var(--tg-theme-link-color);">‚Üë</div>
                            <div>
                                <div class="transaction-amount-text">8 950 ‚ÇΩ</div>
                                <div class="task-hint">7 –∞–≤–≥. 12:46</div>
                            </div>
                        </div>
                        <div class="transaction-card-info">
                            **** 2843<br><span class="mir-logo">–ú–ò–†</span>
                        </div>
                    </div>
                    <div class="transaction-item">
                         <div style="display: flex; align-items: center;">
                            <div class="nav-icon" style="margin-right: 10px; font-size: 18px; color: var(--tg-theme-link-color);">‚Üë</div>
                            <div>
                                <div class="transaction-amount-text">2 350 ‚ÇΩ</div>
                                <div class="task-hint">5 –∞–≤–≥. 18:30</div>
                            </div>
                        </div>
                        <div class="transaction-card-info">
                            **** 2843<br><span class="mir-logo">–ú–ò–†</span>
                        </div>
                    </div>
                    <div class="transaction-item">
                        <div style="display: flex; align-items: center;">
                            <div class="nav-icon" style="margin-right: 10px; font-size: 18px; color: var(--tg-theme-link-color);">‚Üë</div>
                            <div>
                                <div class="transaction-amount-text">10 200 ‚ÇΩ</div>
                                <div class="task-hint">1 –∞–≤–≥. 12:12</div>
                            </div>
                        </div>
                        <div class="transaction-card-info">
                            **** 2843<br><span class="mir-logo">–ú–ò–†</span>
                        </div>
                    </div>
                    <div class="transaction-item">
                        <div style="display: flex; align-items: center;">
                            <div class="nav-icon" style="margin-right: 10px; font-size: 18px; color: var(--tg-theme-link-color);">‚Üë</div>
                            <div>
                                <div class="transaction-amount-text">2 150 ‚ÇΩ</div>
                                <div class="task-hint">30 –∏—é–ª. 17:22</div>
                            </div>
                        </div>
                        <div class="transaction-card-info">
                            **** 2843<br><span class="mir-logo">–ú–ò–†</span>
                        </div>
                    </div>
                </div>
            </div>
            </div>

        <div id="screen-moderation" class="app-screen" style="display: none; text-align: center; padding-top: 150px;">
            <h2 id="moderation-status">–§–æ—Ç–æ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏...</h2>
            <p style="font-size: 20px;">‚è≥</p>
        </div>
        
         <div id="screen-approval" class="app-screen" style="display: none; text-align: center; padding-top: 150px;">
            <h2 id="approval-status" style="color: var(--task-price-color);">‚úÖ –ó–∞–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–æ!</h2>
            <p style="font-size: 20px;">–°—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞—á–∏—Å–ª–µ–Ω—ã –Ω–∞ –í–∞—à –±–∞–ª–∞–Ω—Å.</p>
        </div>

    </div>
    
    <div class="bottom-nav">
        <div id="nav-tasks" class="nav-item active" onclick="showScreen('tasks')">
            <div class="nav-icon">‚ò∞</div>
            <div>–ó–∞–¥–∞–Ω–∏—è</div>
        </div>
        <div id="nav-home" class="nav-item" onclick="showScreen('home')">
            <div class="nav-icon">üè†</div>
            <div>–î–æ–º–∏–∫</div>
        </div>
        <div id="nav-wallet" class="nav-item" onclick="showScreen('wallet')">
            <div class="nav-icon">üí≥</div>
            <div>–ö–æ—à–µ–ª–µ–∫</div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const mainButton = tg.MainButton;
        
        let currentTaskId = null; 
        let currentTaskPrice = 0;
        let isFileUploaded = false; // –§–ª–∞–≥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
        let currentBalance = 8950; 
        
        // --- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ–Ω–µ–≥ ---
        const formatCurrency = (amount) => `${amount.toLocaleString('ru-RU')} ‚ÇΩ`;

        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¢–µ–º—ã ---
        tg.ready();
        
        if (tg.themeParams) {
            for (const key in tg.themeParams) {
                document.documentElement.style.setProperty(`--tg-${key}`, tg.themeParams[key]);
            }
        }
        
        function updateBalanceUI() {
            document.getElementById('wallet-balance-value').innerText = formatCurrency(currentBalance);
        }

        // --- –û–ë–†–ê–ë–û–¢–ß–ò–ö –ì–õ–ê–í–ù–û–ô –ö–ù–û–ü–ö–ò (–£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô) ---
        mainButton.onClick(() => {
            const buttonText = mainButton.text;
            if (buttonText === '–í–´–ü–û–õ–ù–ò–¢–¨') {
                startExecution();
            } else if (buttonText === '–ó–ê–í–ï–†–®–ò–¢–¨') {
                finishTaskExecution();
            } else if (buttonText === '–ó–ê–ü–†–û–°–ò–¢–¨ –í–´–í–û–î') {
                initiateWithdrawal();
            }
        });


        // --- –õ–û–ì–ò–ö–ê –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –≠–ö–†–ê–ù–û–í (SPA) ---
        function showScreen(screenName) {
            if (screenName === 'home') {
                 alert('–†–∞–∑–¥–µ–ª "–î–æ–º–∏–∫" –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.');
                 return;
            }

            document.querySelectorAll('.app-screen').forEach(screen => {
                screen.style.display = 'none';
            });
            mainButton.hide();

            const screenElement = document.getElementById(`screen-${screenName}`);
            if (screenElement) {
                screenElement.style.display = 'block';
            }

            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            const navItem = document.getElementById(`nav-${screenName}`);
            if (navItem) {
                navItem.classList.add('active');
            }

            if (screenName === 'wallet') {
                updateBalanceUI();
                if (currentBalance > 0) {
                    mainButton.setText('–ó–ê–ü–†–û–°–ò–¢–¨ –í–´–í–û–î');
                    mainButton.show();
                }
            } else if (screenName === 'details') {
                // –ü—Ä–∏ –≤—Ö–æ–¥–µ –Ω–∞ —ç–∫—Ä–∞–Ω –¥–µ—Ç–∞–ª–µ–π, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º "–í–´–ü–û–õ–ù–ò–¢–¨"
                mainButton.setText('–í–´–ü–û–õ–ù–ò–¢–¨');
                mainButton.setParams({ is_active: true, is_visible: true });
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
                resetUploadField();
            } 
        }

        // --- –õ–û–ì–ò–ö–ê –û–¢–ö–†–´–¢–ò–Ø –î–ï–¢–ê–õ–ï–ô –ó–ê–î–ê–ù–ò–Ø ---
        function openTaskDetails(id, title, price, tool, description) {
            currentTaskId = id;
            currentTaskPrice = price;
            
            document.getElementById('detail-title').innerText = title;
            document.getElementById('detail-price').innerText = formatCurrency(price);
            document.getElementById('detail-description').innerText = description;
            
            showScreen('details');
        }
        
        // --- –õ–û–ì–ò–ö–ê –§–ò–õ–¨–¢–†–ê–¶–ò–ò ---
        function filterTasks(category) {
            const list = document.getElementById('task-list');
            const tasks = list.querySelectorAll('.task-item');
            let count = 0;

            tasks.forEach(task => {
                if (category === 'all' || task.classList.contains(`task-${category}`)) {
                    task.style.display = 'flex';
                    count++;
                } else {
                    task.style.display = 'none';
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
            document.querySelectorAll('.filter-button').forEach(btn => btn.classList.remove('active'));
            const activeFilter = document.querySelector(`.filter-button[onclick="filterTasks('${category}')"]`);
            if (activeFilter) {
                activeFilter.classList.add('active');
                activeFilter.innerText = activeFilter.innerText.split('(')[0].trim() + ` (${count})`;
            }
        }
        
        // --- –®–∞–≥ 1: –ù–∞—á–∏–Ω–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–∫–Ω–æ–ø–∫–∞ "–í–´–ü–û–õ–ù–ò–¢–¨" -> –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª—è –∑–∞–≥—Ä—É–∑–∫–∏) ---
        function startExecution() {
            // –ö–Ω–æ–ø–∫–∞ –í–´–ü–û–õ–ù–ò–¢–¨ –∏—Å—á–µ–∑–∞–µ—Ç, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ó–ê–í–ï–†–®–ò–¢–¨ (–Ω–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞—è)
            mainButton.setText('–ó–ê–í–ï–†–®–ò–¢–¨');
            mainButton.setParams({ 
                is_active: false, // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞, –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω —Ñ–∞–π–ª
                is_visible: true,
                color: tg.themeParams.hint_color // –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Ü–≤–µ—Ç
            }); 
            
            alert('–ó–∞–¥–∞–Ω–∏–µ –Ω–∞—á–∞—Ç–æ! –¢–µ–ø–µ—Ä—å –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.');
        }

        // --- –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ ---
        function simulateUpload() {
            const uploadField = document.getElementById('upload-field');
            if (!isFileUploaded) {
                 uploadField.innerHTML = '<span class="upload-icon">‚úÖ</span><span>–§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω (1.2 MB). –ù–∞–∂–º–∏—Ç–µ "–ó–ê–í–ï–†–®–ò–¢–¨"</span>';
                 uploadField.classList.add('uploaded');
                 isFileUploaded = true;

                 // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É "–ó–ê–í–ï–†–®–ò–¢–¨"
                 mainButton.setParams({
                    is_active: true,
                    color: tg.themeParams.button_color || '#007AFF'
                 });
            }
        }

        function resetUploadField() {
            const uploadField = document.getElementById('upload-field');
            uploadField.innerHTML = '<span class="upload-icon">üìÅ</span><span>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ / —Å–∫—Ä–∏–Ω—à–æ—Ç–∞</span>';
            uploadField.classList.remove('uploaded');
            isFileUploaded = false;
        }


        // --- –®–∞–≥ 2: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è (–∫–Ω–æ–ø–∫–∞ "–ó–ê–í–ï–†–®–ò–¢–¨") ---
        function finishTaskExecution() {
            if (!isFileUploaded) {
                alert('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª/—Å–∫—Ä–∏–Ω—à–æ—Ç –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º!');
                return;
            }
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
            showScreen('moderation');
            document.getElementById('moderation-status').innerText = '–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏...';
            mainButton.hide();

            setTimeout(() => {
                currentBalance += currentTaskPrice;
                
                showScreen('approval'); 
                document.getElementById('approval-status').innerText = `‚úÖ –ó–∞–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–æ! (+${formatCurrency(currentTaskPrice)})`;
                document.getElementById('approval-status').style.color = 'var(--task-price-color)';

                tg.sendData(JSON.stringify({ 
                    action: "task_approved", 
                    task_id: currentTaskId, 
                    amount: currentTaskPrice 
                })); 

                setTimeout(() => {
                    showScreen('wallet');
                }, 2000); 
            }, 3000); 
        }
        
        // --- –õ–û–ì–ò–ö–ê –í–´–í–û–î–ê –°–†–ï–î–°–¢–í ---
        function initiateWithdrawal() {
            showScreen('moderation');
            document.getElementById('moderation-status').innerText = '–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è...';
            mainButton.hide();
            
            const withdrawalAmount = currentBalance; 

            setTimeout(() => {
                showScreen('approval');
                document.getElementById('approval-status').innerText = `üí∏ –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ ${formatCurrency(withdrawalAmount)} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!`;
                document.getElementById('approval-status').style.color = 'var(--tg-theme-text-color)';
                
                // –°–±—Ä–æ—Å –±–∞–ª–∞–Ω—Å–∞ –¥–æ 0
                currentBalance = 0;
                
                tg.sendData(JSON.stringify({ 
                    action: "withdrawal_request", 
                    amount: withdrawalAmount, 
                    user_id: tg.initDataUnsafe.user.id 
                }));
                
                setTimeout(() => {
                    showScreen('wallet');
                }, 2000); 
            }, 4000); 
        }
        
        // --- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è/–ø–æ–∫–∞–∑–∞ –±–∞–ª–∞–Ω—Å–∞ ---
        function toggleBalanceVisibility() {
            const balanceElement = document.getElementById('wallet-balance-value');
            if (balanceElement.innerText.includes('****')) {
                balanceElement.innerText = formatCurrency(currentBalance);
            } else {
                balanceElement.innerText = '**** ‚ÇΩ';
            }
        }

        // –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
        showScreen('tasks'); 
    </script>
</body>
</html>
